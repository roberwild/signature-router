# Test profile

spring:
  # Allow bean definition overriding for test mocks (Story 8.1)
  main:
    allow-bean-definition-overriding: true
  
  jpa:
    hibernate:
      ddl-auto: validate  # Tests use Flyway migrations with Testcontainers
    show-sql: false
    properties:
      hibernate:
        format_sql: false

  # Spring Security OAuth2 - Test mode (Story 8.1)
  security:
    oauth2:
      resourceserver:
        jwt:
          # Test: Use mock JWT validation (no real OAuth2 server required)
          # MockMvc with @WithMockUser or jwt() will create test tokens
          issuer-uri: http://mock-issuer.test
          jwk-set-uri: http://mock-issuer.test/jwks

  # Disable Vault for tests (Story 1.4)
  cloud:
    vault:
      enabled: false

logging:
  level:
    root: WARN
    com.bank.signature: INFO
    org.springframework: WARN
    org.springframework.security: INFO
    org.testcontainers: INFO

# Test configuration notes:
# - Tests will use Testcontainers for PostgreSQL (Story 1.2)
# - Tests will use Testcontainers for Kafka (Story 1.3)
# - Integration tests will be added starting Story 1.6
# - Security tests use MockMvc with jwt() for JWT mocking (Story 1.7)

